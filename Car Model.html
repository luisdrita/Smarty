<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Affordable and professional web design">
    <meta name="keywords" content="web design, affordable web design, professional web design">
    <meta name="author" content="Brad Traversy">
    <title>RCar | Car Model</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">

    <style>

        body,pre{
            font-family: "Raleway", sans-serif;
        }

        .container2 {
            width:80%;
            margin:auto;
            padding: 0;
            overflow:hidden;
            text-align: center;
        }

        footer{
            padding:1px;
            margin-top:0;
            color:#ffffff;
            background-color: #000000;
            text-align: center;
        }

        footer p{
            float: left;
            width: 50%;
            margin-left: 25%;
        }

        .grid-container2 {
             display: grid;
             grid-template-columns: 300px 300px;
             grid-gap: 15px;
             background-color: white;
             height: 250px;
             margin-left: 200px;
         }

        .grid-container22 {
            display: grid;
            grid-template-columns: auto auto;
            grid-gap: 20px;
            background-color: white;
            height: 650px;
        }

        .grid-container3 {
            display: grid;
            grid-template-columns: auto auto auto;
            grid-gap: 15px;
            background-color: white;
            height: 192px;
        }

        .grid-container33 {
            display: grid;
            grid-template-columns: 200px 200px 200px;
            grid-gap: 15px;
            background-color: white;
            height: 500px;
        }

        .a {
            grid-column-start: 1;
            grid-column-end: 3;
            grid-row-start: 3;
            grid-row-end: 3;
        }

        .a2 {
            grid-column-start: 1;
            grid-column-end: 3;
            grid-row-start: 2;
            grid-row-end: 2;
        }

        .grid-container3 > div, .grid-container2 > div, .grid-container22 > div, .grid-container33 > div {
            height: auto;
            width: auto;
            background-size: cover;
            background-repeat: no-repeat;

        }

        .hiddenn{
            display: none;
            position: absolute;
            color: black;
            text-align: center;
            font-size: 25px;
            background-color: transparent;
        }

        .image:hover > .hiddenn{
            display: block;
            width: 30%;

        }

        .image2:hover > .hiddenn{
            display: block;
            width: 50%;

        }

        .image3:hover > .hiddenn{
            display: block;
            width: 20%;

        }

        article > p, ol{
            line-height: 35px; text-align: justify;
        }

        figure{
            line-height: 30px;
            text-align: justify;
            font-size: 15px;
        }

        figcaption{
            margin-top: 10px;
            text-align: center;
        }

        a {
            text-decoration: none;
            color: red;
        }

    </style>


</head>
<body onscroll="myFunction()" onload="resize()" onresize="resize()" style="margin: 0 0 0 0;">

<header>
    <div style="height: 90px; margin-top:0; background-color: black; text-align: center;color: red;font-size: 80px"> <a href="index.html">RCar</a> <span style="color: white">|</span> <span style="font-size: 35px;color: white;"> Car </span> </div>
</header>

<div style="width: 1000px; margin:auto;">
    <article class = "pageHeight" style="position:relative; height: 9900px;">

        <div id = "indexxx" style="background-color: black;color: white;position: fixed;left:5%; top: 175px;width: 100px;text-align: center;font-size: 20px;display: none;">Index</div>

        <ul id = "indexx" style="position:fixed; left:0.125%; top: 195px; list-style-type: none;line-height: 40px; display: none;">
            <li style="color: black;padding: 0 10px; border-left: solid black;">Introduction
                <ul style="cursor: pointer; color: black;padding: 0 10px;margin-top: 10px;list-style-type: none;">
                    <li id = "first" onclick="topFunction(150)" style="cursor: pointer; color: black;padding: 0 10px;"> Remote-Controlled Cars </li>
                    <li id = "second" onclick="topFunction(880)" style="cursor: pointer; color: black;padding: 0 10px;"> Arduino </li>
                </ul>
            </li>
            <li style="color: black;border-left: solid black;padding: 0 10px;margin-top: 10px;">Prototype
                <ul style="cursor: pointer; color: black;padding: 0 10px;margin-top: 10px;list-style-type: none;">
                <li id = "third" onclick="topFunction(1930)" style="cursor: pointer; color: black;padding: 0 10px;"> Electronics </li>
            <li id = "fourth" onclick="topFunction2(3520+690+130)" style="cursor: pointer; color: black;padding: 0 10px;"> Design </li>
            <li id = "fifth" onclick="topFunction2(9100)" style="cursor: pointer; color: black;padding: 0 10px;"> Download Files </li>
            <li id = "sixth" onclick="topFunction2(9100)" style="cursor: pointer; color: black;padding: 0 10px;"> Future Improvements </li>
                </ul>

            </li>
        </ul>

        <script>

            function resize() {

                let index = document.getElementById("indexx");
                let indexx = document.getElementById("indexxx");

                if (index.style.display === "block" && window.innerWidth < 1540) {
                    index.style.display = "none";
                    indexx.style.display = "none";

                }

                if (index.style.display === "none" && window.innerWidth > 1540) {
                    index.style.display = "block";
                    indexx.style.display = "block";
                }

            }

            function topFunction(distance) {
                document.body.scrollTop = distance;
                document.documentElement.scrollTop = distance;
            }

            function topFunction2(distance) {
                if(document.getElementsByClassName("dropdown")[0].nextElementSibling.style.display==="block"){

                    document.documentElement.scrollTop = distance+4720;

                }else{

                    document.documentElement.scrollTop = distance;
                }
            }

            function myFunction() {

                if (document.getElementsByClassName("dropdown")[0].nextElementSibling.style.display === "block") {

                    if (document.documentElement.scrollTop < 150) {
                        document.getElementById("first").style.color = "black";
                        document.getElementById("second").style.color = "black";
                        document.getElementById("third").style.color = "black";
                        document.getElementById("fourth").style.color = "black";
                        document.getElementById("sixth").style.color = "black";
                        document.getElementById("fifth").style.color = "black";
                    } else if ((document.documentElement.scrollTop < 880) && (document.documentElement.scrollTop >= 150)) {
                        document.getElementById("first").style.color = "red";
                        document.getElementById("second").style.color = "black";
                        document.getElementById("third").style.color = "black";
                        document.getElementById("fourth").style.color = "black";
                        document.getElementById("sixth").style.color = "black";
                        document.getElementById("fifth").style.color = "black";
                    } else if ((document.documentElement.scrollTop < 1930) && (document.documentElement.scrollTop >= 880)) {
                        document.getElementById("second").style.color = "red";
                        document.getElementById("first").style.color = "black";
                        document.getElementById("third").style.color = "black";
                        document.getElementById("fourth").style.color = "black";
                        document.getElementById("sixth").style.color = "black";
                        document.getElementById("fifth").style.color = "black";
                    } else if ((document.documentElement.scrollTop < 3520+820+4720) && (document.documentElement.scrollTop >= 1930)) {
                        document.getElementById("third").style.color = "red";
                        document.getElementById("second").style.color = "black";
                        document.getElementById("fourth").style.color = "black";
                        document.getElementById("first").style.color = "black";
                        document.getElementById("sixth").style.color = "black";
                        document.getElementById("fifth").style.color = "black";
                    } else if ((document.documentElement.scrollTop < 6891+820+1385+4720) && (document.documentElement.scrollTop >= 3520+820+4720)) {
                        document.getElementById("fourth").style.color = "red";
                        document.getElementById("third").style.color = "black";
                        document.getElementById("second").style.color = "black";
                        document.getElementById("first").style.color = "black";
                        document.getElementById("sixth").style.color = "black";
                        document.getElementById("fifth").style.color = "black";
                    } else if ((document.documentElement.scrollTop < 6891+820+1385+50+4720) && (document.documentElement.scrollTop >= 6891+820+1385+4720)) {
                        document.getElementById("fifth").style.color = "red";
                        document.getElementById("third").style.color = "black";
                        document.getElementById("second").style.color = "black";
                        document.getElementById("first").style.color = "black";
                        document.getElementById("fourth").style.color = "black";
                        document.getElementById("sixth").style.color = "red";
                    }

                } else {

                    if (document.documentElement.scrollTop < 150) {
                        document.getElementById("first").style.color = "black";
                        document.getElementById("second").style.color = "black";
                        document.getElementById("third").style.color = "black";
                        document.getElementById("fourth").style.color = "black";
                        document.getElementById("sixth").style.color = "black";
                        document.getElementById("fifth").style.color = "black";
                    } else if ((document.documentElement.scrollTop < 880) && (document.documentElement.scrollTop >= 150)) {
                        document.getElementById("first").style.color = "red";
                        document.getElementById("second").style.color = "black";
                        document.getElementById("third").style.color = "black";
                        document.getElementById("fourth").style.color = "black";
                        document.getElementById("sixth").style.color = "black";
                        document.getElementById("fifth").style.color = "black";
                    } else if ((document.documentElement.scrollTop < 1930) && (document.documentElement.scrollTop >= 880)) {
                        document.getElementById("second").style.color = "red";
                        document.getElementById("first").style.color = "black";
                        document.getElementById("third").style.color = "black";
                        document.getElementById("fourth").style.color = "black";
                        document.getElementById("sixth").style.color = "black";
                        document.getElementById("fifth").style.color = "black";
                    } else if ((document.documentElement.scrollTop < 3520+820) && (document.documentElement.scrollTop >= 1930)) {
                        document.getElementById("third").style.color = "red";
                        document.getElementById("second").style.color = "black";
                        document.getElementById("fourth").style.color = "black";
                        document.getElementById("first").style.color = "black";
                        document.getElementById("sixth").style.color = "black";
                        document.getElementById("fifth").style.color = "black";
                    } else if ((document.documentElement.scrollTop < 6891+820+1385) && (document.documentElement.scrollTop >= 3520+820)) {
                        document.getElementById("fourth").style.color = "red";
                        document.getElementById("third").style.color = "black";
                        document.getElementById("second").style.color = "black";
                        document.getElementById("first").style.color = "black";
                        document.getElementById("sixth").style.color = "black";
                        document.getElementById("fifth").style.color = "black";
                    } else if ((document.documentElement.scrollTop < 6891+820+1385+50) && (document.documentElement.scrollTop >= 6891+820+1385)) {
                        document.getElementById("fifth").style.color = "red";
                        document.getElementById("third").style.color = "black";
                        document.getElementById("second").style.color = "black";
                        document.getElementById("first").style.color = "black";
                        document.getElementById("fourth").style.color = "black";
                        document.getElementById("sixth").style.color = "red";
                    }
                }
            }
        </script>

        <h1 style="text-align: center;font-size: 30px;font-weight: lighter;">Introduction</h1>

        <h3>Remote-Controlled Cars</h3>

        <p>
            This kind of robots has a broad range of uses in our society. Army applications, toys for kids, automation projects and
            professional competitions are some scenarios we may find such a device.
            They can be controlled using many technologies, like: wires, Bluetooth, Wi-Fi or 4G/3G
            signals are some of the most well-known.
            Generally, they can be powered by oil or electricity.
            Based on their size, a scale factor is usually attributed. This is done by comparing them with their analogous real models.
            They can be found in many categories: Street, Drift, Buggy, Truggy and Trucks (hover each figure
            with the cursor and find out a complete correspondence).

        </p>

        <div class="grid-container3">
            <div class="image" style="background-image: url('./img/model1.png');">

                <div class = "hiddenn">Buggy</div>

            </div>
            <div class="image" style="background-image: url('./img/model2.png');">

                <div class = "hiddenn">Street</div>

            </div>

            <div class="image" style="background-image: url('./img/model3.png');">

                <div class = "hiddenn">Drift</div>

            </div>

        </div>

        <div class="grid-container2">
            <div class="image" style="background-image: url('./img/model4.png');">

                <div class = "hiddenn">Truck</div>

            </div>
            <div class="image" style="background-image: url('./img/model5.png');">

                <div class = "hiddenn">Truggy</div>

            </div>

        </div>

        <div style="margin-top: 10px; text-align: center;font-size: 15px;"><b>Fig. 1 </b> - 5 standard remote-controlled car categories commercially available. </div>

        <h3>Arduino</h3>

        <p>
            Arduino is an open-source electronic platform based on flexible and reliable hardware and software. It was
            created in 2003 by a group of students from Interaction Design Institute Ivrea, in Ivrea, Italy. The name
            Arduino comes from a bar’s name located in its native city where the creators used to meet. Its purpose is
            to create objects or environments. Arduino can sense the environment by receiving input from a variety of
            sensors and can affect its surroundings by controlling lights, motors and other actuators. The
            microcontroller on the board is programmed using the Arduino language, which is based on C++,
            and the Arduino Integrated Development Environment (IDE), based on Processing. Most boards consist of an
            Atmel 8-bit AVR microcontroller with different number of pins, ROM and RAM memory (among others). These
            pins are organized in 2 rows of male headers, in order to easily connect and integrate it with external circuits. The
            Arduino microcontroller also has an integrated timer based on an oscillating crystal at 16 MHz. Arduino projects
            can be stand-alone, or they can communicate with software running on a computer, such as MATLAB.<br/>

        </p>

            <figure style="float: right;display: inline">

                <img src="./img/nano.png" style="width: 300px;">

                <figcaption> <b>Fig. 2 </b> - Arduino Nano.</figcaption>

            </figure>

        <p>

            &emsp;&emsp;1 of the relevances of this hardware is its ability to convert analog signals into digital ones,
            which can be saved, modified and analyzed in a computer (or other digital device), using specific software. This data
            processing could be essential in a medical diagnostic center, where the least variation in the
            physiological signal could be crucial for the correct diagnosis of certain pathology.<br/>

            &emsp;&emsp;Any program written in Arduino is commonly called a sketch. These files are intended to be saved in the
            owner’s PC with the following extension: .ino. In order to be executed, it only requires 2 basic functions:
            setup and a loop. The 1st one is only executed once (after powering up or resetting the board).
            Information like setting output/input pins; bit rate (baud); variables (…) can be given in this section of
            the program. Libraries can also be initialized in this section. These play an important role in Arduino
            programming, since a limited number of functions are available to be promptly used. Most of the times, it
            is an advantage to use them since functions may often be more efficient from an Arduino’s scope (very
            important due to its limited computational power). On the other side, the loop will be executed cyclically
            with/without interruptions depending on the existence of interrupts or functions that deliberately pause
            the execution (delay, delayMicroseconds).<br/>

            &emsp;&emsp;Many prototypes can be projected using Arduino: ECGs, EMGs, EEGs, Pletismography devices, automatized dispensers,
            games, printers and, of course, robotic cars.

        </p>

        <h1 style="text-align: center;font-size: 30px;font-weight: lighter;">Prototype</h1>

        <h3>Electronics</h3>

        <p>
            In order the car to perform some of the features we were interested in, we had to include several devices.
            Here is a complete list of the components present in the prototype:

        </p>

        <div class="grid-container33" style="float: right;">
            <div class="image3" style="background-image: url('./img/motor.jpg');">

                <div class = "hiddenn">1</div>

            </div>
            <div class="image3" style="background-image: url('./img/servo.png');">

                <div class = "hiddenn">2</div>

            </div>

            <div class="image3" style="background-image: url('./img/leds.jpg');">

                <div class = "hiddenn">3</div>

            </div>

            <div class="image3" style="background-image: url('./img/resistances.jpg');">

                <div class = "hiddenn">4</div>

            </div>
            <div class="image3" style="background-image: url('./img/bluetooth.jpg');">

                <div class = "hiddenn">5</div>

            </div>

            <div class="image3" style="background-image: url('./img/driver.jpg');">

                <div class = "hiddenn">6</div>

            </div>

            <div class="image3" style="background-image: url('./img/gps.jpg');">

            <div class = "hiddenn">7</div>

        </div>

            <div class="image a" style="position: relative;">

                <div style="text-align: center;position: absolute; bottom: 35%;font-size: 15px;width: 450px;"><b>Fig. 3 </b> - List of electric components present in the prototype.</div>

            </div>

        </div>

        <ol style="line-height: 35px; display: inline-block;">
            <li>DC 3V Motor;</li>
            <li>Micro Servo SG90;</li>
            <li>LEDs (Red, Yellow and White);</li>
            <li>Resistances;</li>
            <li>Bluetooth HC-05 Module;</li>
            <li>L298N Driver;</li>
            <li>GPS Module (NEO-6M-0-001).</li>

        </ol>

        <p>

            All connections among the previous components were reverseably performed in a breadboard using
            male-male, male-female and female-female jumper wires. <br/>

            &emsp;&emsp;Using Arduino Nano, we were able to decrease energy consumption and increase the portability of the
            final project. This was done at the expense of some computational power. Since this Arduino's model only has
            2 serial connections (RX and TX – which were used to transfer data between the Bluetooth module and
            the android app), we needed to include an extra serial port to receive the location values from the GPS
            module in the smartphone.<br/>

            &emsp;&emsp;Regarding the lights present in the vehicle, we always included a resistance in order
            to limit the intensity of the current going through the diodes. This was done in the (2) front, (2) back
            and (2) turn signal lights. These lights are totally controlled using the RCar app, except the ones in the
            back that automatically turn on when the car accelerates backwards.<br/>

            &emsp;&emsp;A similar approach was followed with the Bluetooth module. Although, in this case, we included a voltage divider in
            the circuit, such that the HC-05 receives half of the voltage (in the RX port) coming from the 5V Arduino
            port (TX). Nevertheless, this was dispensable. Thus, it was not included in the electric circuit diagram (Fig. 5). <br/>

            &emsp;&emsp;Servo's rotation was lower and upper limited in the Arduino script to 45 and 135 degrees. Avoiding an excessive rotation
            of the wheels of the car. We first used an old servo in our project but, due to bad oiled gears, this was substituted by a
            new one. This way, we eliminated jittering and greatly increased angle precision.<br/>

            &emsp;&emsp;We also decided to include an extra feature in the car - GPS. This detects location with a remarkable accuracy
            (considering the price) lower than 3 meters (radius). Then, a map with a red dot is
            shown in the app, correctly positioned. Note that, due to GPS module limitations, it is not possible to get
            car's position indoors.<br/>

            &emsp;&emsp;A speaker was also added to the circuit. A sound signal is emitted every time one clicks in the
            corresponding button of the app. Both the duration and frequency of the wave were defined in the Arduino
            IDE.<br/>
        </p>
            <figure style="float: left;">

                <img src="./img/hBridge.png" style="width: 300px;">

                <figcaption> <b>Fig. 4 </b> - H-Bridge Logic Circuit.</figcaption>

            </figure>

        <p>
            &emsp;&emsp;The L298N Driver is an electric compound that behaves similarly to a H-Bridge. Depending on the
            interrupters that are closed, the current will flow in 2 different directions across the DC motor. This
            allows the motor to rotate clockwise or counter-clockwise by always applying a positive voltage
            with the Arduino (v<sub>in</sub>). Furthermore, it also controls the velocity at which the axles rotate.
            These 2 sets of interrupters are controlled by the IN1 and IN2 pins present in the
            driver.<br/>

            &emsp;&emsp;Motor has 2 axles (1 pointing to
            the right and another to the left, moving synchronously).<br/>

            &emsp;&emsp;The car is powered by a 9V battery along with its adapter (on/off button incorporated to be easier to cut off circuit's power), which is connected to the L298N Driver. This is both
            feeding the motor and the Arduino (consequently, all the remaining circuitry).

        </p>

        <div>

        <figure style="margin-left: -5px">

            <img src="./img/circuit.png" style="width: 1000px;">

            <figcaption> <b>Fig. 5 </b> - Circuit representation of the car. Note that L298N Motor
                Driver has a slightly different wiring than the one in the figure. And the DC 3V Motor has an
                extra axis pointing in the opposite direction (both moving synchronously).</figcaption>

        </figure>

        </div>
        
        <div class = "dropdown" style="background-color: black; cursor:pointer;border-style: dashed; position: relative;height: 25px;">
            <div style=" color: white;position: absolute;left: 40px;top: 3px;">Arduino Code</div>
            <div id = "plusMinus" style="color: white;position: absolute;right: 40px;bottom: -9px;font-size: 35px;">+</div>
        </div>
        
            <pre style="display: none; border-style: solid;">

            <code>

    // ------------------------------------------------ Including Libraries ------------------------------------------------

    #include <NeoSWSerial.h> // Extra serial communication port
    #include <TinyGPS++.h> // GPS module
    #include <Servo.h> // Servo

    // GPS Parameters
    static const int RXPin = 12;
    static const uint32_t GPSBaud = 9600;

    // The serial connection to the GPS device
    NeoSWSerial ss (RXPin,13);

    // Creating Instances
    Servo servo;
    TinyGPSPlus gps;

    // --------------------------------------------------- Defining Pins ---------------------------------------------------

    int ledPin1 = 2;
    int ledPin2 = 3;
    int headLights = 5;
    int backLights = 7;

    boolean ledPin1State = LOW;
    boolean ledPin2State = LOW;

    int buzzer = 4;

    int motorVelocityControl = 11;
    int motorFrontDirectionControl = 9;
    int motorBackDirectionControl = 10;

    double aux;

    int state;
    int state2 = 4;

    int x, y = 0;
    int xAxis, yAxis;

    unsigned long previousMillis = 0;
    const long interval = 200;

    // ------------------------------------------------------- Setup -------------------------------------------------------

    void setup() {

    // --------------------------------------------------------------- Pin Mode (Input/Output)

    pinMode(ledPin1, OUTPUT); // Side Light
    pinMode(ledPin2, OUTPUT); // Side Light
    pinMode(backLights, OUTPUT); // Back Lights
    pinMode(headLights, OUTPUT); // Front Lights

    pinMode(motorVelocityControl, OUTPUT);
    pinMode(motorFrontDirectionControl, OUTPUT);
    pinMode(motorBackDirectionControl, OUTPUT);

    servo.attach (6);

    Serial.begin(38400);
    ss.begin(GPSBaud);

    }

    // ------------------------------------------------------------ Loop ---------------------------------------------------

    void loop() {

    unsigned long currentMillis = millis();

    // --------------------------------------------------------------- GPS Module

    while (ss.available() > 0)
    if (gps.encode(ss.read()))

    if (gps.location.isValid())
    {
    Serial.print(gps.location.lat(), 6);
    Serial.print("|");
    Serial.println(gps.location.lng(), 6);
    }

    // --------------------------------------------------------------- Bluetooth Module

    while (Serial.available() >= 2) {

    x = Serial.read();

    delay(10);

    y = Serial.read();

    };

    delay(10);

    // --------------------------------------------------------------- Head Lights

    if (x == 1) {

    digitalWrite(headLights, HIGH);

    }

    if (x == 0) {

    digitalWrite(headLights, LOW);

    }

    // --------------------------------------------------------------- Back Lights

    if (motorBackDirectionControl == HIGH) {

    digitalWrite(backLights, HIGH);

    }  else {

    digitalWrite(backLights, LOW);

    }

    // --------------------------------------------------------------- Buzzer

    if (x == 2) {

    tone(buzzer, 200, 80);

    } else if (x == 3) {

    digitalWrite(buzzer, LOW);

    }

    // --------------------------------------------------------------- Left Light

    if (x == 5) {

    if (currentMillis - previousMillis >= interval) {

    previousMillis = currentMillis;

    if (ledPin1State == LOW) {
    digitalWrite(ledPin1, HIGH);
    ledPin1State = HIGH;
    } else {
    digitalWrite(ledPin1, LOW);
    ledPin1State = LOW;
    }

    }

    } else if (x == 4) {

    digitalWrite(ledPin1, LOW);

    }

    // --------------------------------------------------------------- Right Light

    if (x == 6) {

    if (currentMillis - previousMillis >= interval) {

    previousMillis = currentMillis;

    if (ledPin2State == LOW) {
    digitalWrite(ledPin2, HIGH);
    ledPin2State = HIGH;
    } else {
    digitalWrite(ledPin2, LOW);
    ledPin2State = LOW;
    }

    }

    } else if (x == 7) {

    digitalWrite(ledPin2, LOW);

    }

    // --------------------------------------------------------------- Servo Motor

    if ((x == 255 && y == 255) || x == 153) {

    servo.write(90 - 15);
    delay(10);

    } else if (x > 153 & y < 153) {
    servo.write((180 / PI)*asin((153 - y) / (pow(pow(x - 153, 2) + pow(153 - y, 2), 0.5))) * 0.5 + 45 - 15);
    delay(10);
    } else if (x < 153 & y < 153 & x > 10 & y > 10) {
    servo.write(160 - ((180 / PI)*asin((153 - y) / (pow(pow(x - 153, 2) + pow(153 - y, 2), 0.5))) * 0.5 + 45 - 15));
    delay(10);
    } else if (x > 153 & y > 153) {
    servo.write((180 / PI)*abs(asin((153 - y) / (pow(pow(x - 153, 2) + pow(153 - y, 2), 0.5)))) * 0.5 + 45 - 15);
    delay(10);
    } else if (x < 153 & y > 153) {
    servo.write(160 - ((180 / PI)*asin(abs(153 - y) / (pow(pow(x - 153, 2) + pow(153 - y, 2), 0.5))) * 0.5 + 45 - 15));
    delay(10);
    }

    // --------------------------------------------------------------- DC Motor

    aux = pow(pow(x - 153, 2) + pow(153 - y, 2), 0.5);

    if (x == 255 || y == 255) {

    analogWrite(motorVelocityControl, 0);

    } else if (y < 153 && aux < 120 && y > 10) {
    analogWrite(motorVelocityControl, 0.7 * aux * 255 / 120);
    digitalWrite(motorFrontDirectionControl, HIGH);
    digitalWrite(motorBackDirectionControl, LOW);
    delay(20);

    } else if (y > 153 && aux < 120) {
    digitalWrite(motorFrontDirectionControl, LOW);
    digitalWrite(motorBackDirectionControl, HIGH);
    analogWrite(motorVelocityControl, 0.7 * aux * 255 / 120);
    digitalWrite(backLights, HIGH);
    delay(20);

    } else if (y > 153 && aux < 120) {
    digitalWrite(motorFrontDirectionControl, LOW);
    digitalWrite(motorBackDirectionControl, HIGH);
    analogWrite(motorVelocityControl, 0.7 * aux * 255 / 120);
    digitalWrite(backLights, HIGH);
    delay(20);

    } else if (y < 153 && aux < 120 && y > 10) {
    digitalWrite(motorFrontDirectionControl, HIGH);
    digitalWrite(motorBackDirectionControl, LOW);
    analogWrite(motorVelocityControl, 0.7 * aux * 255 / 120);
    delay(20);

    }

    }
        </code>
        </pre>
        <script>
            let acc = document.getElementsByClassName("dropdown");
            let acc2 = document.getElementsByClassName("pageHeight");
            let acc3 = document.getElementById("plusMinus");
            let i;

            for (i = 0; i < acc.length; i++) {
                acc[i].addEventListener("click", function() {
                    let panel = this.nextElementSibling;
                    let panel2 = acc2[0];
                    let panel3 = acc3;
                    if (panel.style.display === "block") {
                        panel.style.display = "none";
                        panel2.style.height = "9900px";
                        panel3.innerHTML = "+";
                        panel3.style.bottom = "-9px";
                    } else {

                        panel.style.display = "block";
                        panel2.style.height = "14620px";
                        panel3.innerHTML = "-";
                        panel3.style.bottom = "-6px";
                    }
                });
            }

        </script>

        <h3 style="margin-top: 25px;">Design</h3>

<p>
    All the parts of the remote-controlled car were modelled using the CAD software SolidWorks.
    The complete model (Fig. 6) was divided in several parts (which were meant to be 3D printed separately): wheels,
    chassis, L-shape axles, connecting bar and the body of the car. The shape of the last component resulted from a funny
    try to roughly resemble <a target="_blank" rel="noopener noreferrer" href="https://www.google.com/url?sa=i&rct=j&q=&esrc=s&source=images&cd=&cad=rja&uact=8&ved=2ahUKEwiJ1aXD07rdAhUBtRoKHRJCBtoQjRx6BAgBEAU&url=http%3A%2F%2Frentapolicecar.com%2Four-cars&psig=AOvVaw3E0nFzeMX9BPpbG4nP_7Dt&ust=1537019805284361">FBI vehicles</a>.

    <figure style="float: right;">

    <img src="./img/car1.png">

    <figcaption> <b>Fig. 6 </b> - Isometric view of the remote-controlled car model.</figcaption>

    </figure>

</p>

        <p>

            &emsp;&emsp;At the beginning, the first parts to be modelled were the back wheels. An <a target="_blank" rel="noopener noreferrer" href="https://grabcad.com/library/rc-drift-wheel-1-10-1">initial design</a> was obtained from
    GrabCad. However, some changes had to be made in order to fit our model. Since these wheels were meant to be attached
    to the motor (with a double axis, 1 pointing to the right and another to the left), a cylindrical axle with an appropriate length and internal radius had to be built. Instead of
    having the hexagonal cavity that was present in the original design, the shape of the hollow inner cylinder was
    changed to match the shape of the motor's axle, as we can see in Fig. 7.

            <figure style="float: left;">

                <img src="./img/car2.png">

                <figcaption> <b>Fig. 7 </b> - Back wheel design.</figcaption>

            </figure>

        </p>

        <p>

            &emsp;&emsp;Special attention should be given to the fact the wheels were fixed to this double axle, consequently, these
            2 move along at the motor speed. This is not the case for the 2 front wheels. <br/>

            The same original design was used
    in the front wheels. However, the axles modelled were completely different, as these were meant to rotate
    around a vertical imaginary axle, synchronously with the servo's paddle. This movement was limited to 45º rotation to each side. Both wheels’ axles
    were designed in an L-shape, with a cylindrical and a rectangular end. The latter is always parallel to the
    servo’s paddle and has a cut where an elastic is to be wrapped around and connected to the paddle (Fig. 8).

            <figure style="float: right;">

                <img src="./img/car3.png">

                <figcaption style="width: 400px;"> <b>Fig. 8 </b> - Cut view of 1 of the front
                    wheels. 2 features of the L-shaped axle are visible here: the cut where the
                    elastic is to be wrapped and the connection between the axle and the wheel.</figcaption>

            </figure>

        </p>

        <p>

            &emsp;&emsp;Both ends of each axle were connected by a bar to guarantee the wheels move simultaneously to the sides. Furthermore, to
    assure the wheels rotate at the same angle as the servo’s paddle, the distance between the centre of
    the hinge of the axle and the centre of the cut was equal to the length of the paddle (Fig. 9).

            <figure style="float: left;">

                <img src="./img/car4.png">

                <figcaption style="width: 500px;"> <b>Fig. 9 </b> - Bottom view of the chassis. It is visible the connection between
                    both front wheels’ axles.</figcaption>

            </figure>

        </p>

        <p>

            &emsp;&emsp;To guarantee the rotation of the wheels, a revolved cut was added to the cylindrical end of the axle and a
            complementary boss was designed in the wheel (Fig. 8). In order the joint to be detachable, a difference of 0.3mm between
    the internal and external radius was guaranteed. The same principle was applied to the hinges in both axles. Thus, 2 cylindrical
            structures were built on the bottom surface of the chassis, each with a revolved cut at the
    end. A complementary structure was built in each axle corner, again with the 0.3mm difference.

            <figure style="float: right;">

                <img src="./img/car5.png">

                <figcaption style="width: 400px;"> <b>Fig. 10 </b> - Isometric view of the chassis, wheels, axles and servo.</figcaption>

            </figure>

        </p>

        <p>

            &emsp;&emsp;As for the chassis of the car, besides the structures already referred, there are 2 other features worth
    mentioning. First, a cut in the chassis was made in order to fit the servo, as the paddle must be at the same
    height as the axles. Second, it had to be cut at the front in order the wheels to turn (Fig. 10). <br/>

            &emsp;&emsp;Finally, although this part was not printed due to its dimension and accessory nature, the body of the
    car was also designed. We made sure to include the cuts for the respective lighting system, place for (back and front)
            registration plates and 4 complementary supports to the ones present on the top surface of the chassis - tightly connecting both parts. <br/>

            &emsp;&emsp;It is shown below the side, front and back views of the completely assembled model (Fig.11).

</p>

        <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>

        <div class="grid-container22" style="padding-left: 90px;padding-right: 90px;">
            <div class="image2" style="background-image: url('./img/car7.png');background-size: 350px">

                <div class = "hiddenn" style="background-color: white;width: 400px">Front View</div>

            </div>
            <div class="image2" style="background-image: url('./img/car8.png');background-size: 350px">

                <div class = "hiddenn" style="background-color: white;width: 400px">Back View</div>

            </div>

            <div class="image2 a2" style="background-image: url('./img/car6.png');background-size: 450px; margin-left: 160px;">

                <div class = "hiddenn" style="background-color: white;">Side View</div>

            </div>

        </div>



        <div style="margin-top: -50px; text-align: center;font-size: 15px;"><b>Fig. 11 </b>- Different views of the car prototype modeled using SoliWorks.</div>

        <p>

            The biggest challenge faced in this part of the project was the design of the front wheels' rotation system.
            This had to be redone several times in order to allow the proper movement imposed by the servo. However, this was never tested, as the
            axles were meant to be connected to the servo’s paddle by an elastic, and this could only be done after printing. <br/>

            &emsp;&emsp;Furthermore, it is important to mention that in order to achieve the final design, all components had to be
            redone several times, particularly, the cuts and extrudes responsible for the connections between
            parts. This assured the pieces were aligned and had appropriate dimensions. <br/>

            &emsp;&emsp;After modelling, the main goal, in terms of design, was to 3D print (using Ultimaker 2+ Extended printer
            - Fig. 12) the several parts and use them to build the model. Finally, all the electric components were displaced in the car.

        </p>

            <figure style="float: left;">

                <img src="./img/printer.png">

                <figcaption style="width: 300px;"> <b>Fig. 12 </b> - Ultimaker 2+ Extended, at iStartLab (IST, University of Lisbon).</figcaption>

            </figure>

            <p>

            &emsp;&emsp;It is important to mention there was a dimension limitation associated with the printer, which did not
            allow us to print the body of the car. The printing required the use of
            a 2.85mm PLA filament. Although some smaller details of the model were not perfectly reproduced, printing
                was well succeeded. <br/>



                &emsp;&emsp; Regarding the 2 cylindrical structures designed on the bottom of the chassis (to fit the L-shape axles),
                they ended up slightly prone to break. This was fixed by wrapping some resistant tap glue. Moreover, still
                to secure the axles to the chassis, 2 elastics were wrapped around on each side, which helped keeping the
                car stable and all parts in place. In other words, they pushed both parts against each other. 1 way to
                avoid these issues, would have been to increase the size of these structures.<br/>

            &emsp;&emsp;The revolved structure inside the front wheels, which was designed to fit with the axle, was filled with
                support material (printed along with the car). This required a precision handwork to avoid loosening
                these joints while removing it. Although, later, we realized that due to dilation of PLA, these 2 parts
                did not fit. This was solved by shaving them. 1 problem encountered next was the wheels were not very
                secure, which resulted in them becoming crooked with the movement of the car. The solution was gluing an
                aluminium ring to each front wheel (after inserting the complementary part of the corresponding axle
                inside it) and wrapping some wire around each joint. <br/>

            &emsp;&emsp;Both axles were connected, as it was originally designed, by a bar (using 2 screws and corresponding
                nuts, as the joints) and an elastic. Originally, this elastic was supposed to connect to servo's paddle.
                After testing car's side movement and confirming the bar could flip the axles better if directly
                connected to the paddle, we decided to join both, using a thin wire of metal. Consequently, the elastic
                (parallel to the bar) was discarded. The servo was kept in place by gluing its sides to the hole in the
                chassis. <br/>

            &emsp;&emsp;For both the front and back wheels, hot glue was distributed along their perimeter to increase ground
                traction. Due to the added diameter the glue streaks added to the front wheels, part of the chassis had
                to be shaved off in order to avoid bumping in the side movement of the car.   <br/>

            &emsp;&emsp;Finally, the front, back and turn signal lights were glued in their usual positions to the car. The breadboard and the GPS were attached on the back. And the DC 3V Motor in the bottom of the
                chassis. All the other components were kept in place with several elastics to guarantee they would not
                affect the car movement or disconnect its circuitry.  <br/>

            &emsp;&emsp;All in all, even though the design required some adaptations after being printed, the result was a success.
                The car was able to move stably, with enough traction and perfectly supported the weight of all
                components. Moreover, the cost of printing was negligible (< $1).

        </p>

        <div style="position: relative;margin-top: -20px; text-align: center; font-size: 15px;">

    <!--        <video width="900" controls style="display: block; margin: auto; margin-bottom: 20px;">
                <source src="./video/RCar[DIY].mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            -->
            <iframe width="900" height="506" src="https://www.youtube.com/embed/44eoiYBrYHY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen style="margin: auto;"></iframe>
            <br/>
            <b>Video 1</b> - DIY RCar project. Includes design, electronics and programming explanation.

        </div>

        <h3>Download Files</h3>

        <div style="position: relative;height: 150px;">

            <figure style="position: absolute;left: 100px;top:0;">

                <a href="./files/RCar.zip">

                    <img src="img/solidworks2.png" width="100px" style="margin-bottom: 10px;">

                </a>

                <figcaption style="text-align: center;margin-top: -5px; margin-left: -18px;">SLDPRT & SLDASM</figcaption>

            </figure>

            <figure style="position: absolute;left: 400px;margin-top: 40px;">

                <a href="./files/RCar.ino">

                    <img src="img/ino.jpeg" width="150px">

                </a>

                <figcaption style="text-align: center; margin-top: -5px">INO</figcaption>

            </figure>

            <figure style="position: absolute;left: 700px;margin-top: 50px;">

                <a href="./files/RCar.fzz">

                    <img src="img/fritzing.png" width="150px">

                </a>

                <figcaption style="text-align: center;">FZZ</figcaption>

            </figure>

        </div>

        <h3>Future Improvements</h3>

        <ul style="list-style-image: url('./img/bulb.png'); line-height: 35px;">
            <li>Instead of a breadboard, a PCB (Printed Circuit Board) would turn the car circuitry more durable and
                less prone to short-circuits or other electric fails;</li>
            <li>An optimized Bluetooth module would improve the range of operability and to reduce the lag between
                commands (given with the app) and the effective performed actions;</li>
            <li>There are plenty of different batteries available in the market. Lighter and lasting batteries would positively influence car's autonomy;</li>
            <li>A system of suspension is another structure that can be added to the project in the future. This feature
                takes a greater importance if the prototype is intended to be used in an off-road track;</li>

            <li>The modelled body could have been more aerodynamic. However, since this part was not printed along with
                the rest of the car (due to size and time constraints), this was not prioritized in the design;</li>

            <li>Adding a camera to the car would allow us to control it out of sight; </li>

            <li>Several parts were all meant to be printed in plastic. The usage of other low-cost materials, like
                rubber for the wheels and some metal alloy for the axles/chassis, would allow us to create an enhanced
                and still cheap model.</li>
        </ul>

    </article>
</div>

<footer>
    <div class="container2">

        <p>© Copyright 2018 – RCar</p>

    </div>
</footer>
</body>
</html>
